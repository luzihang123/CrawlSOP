# 招标订阅系统

需求目标：分析挖掘招投标项目中，有价值的数据信息

## 功能设计及策略

对比舆情是海量的新闻，通过关键词查新闻； 招投标网站的搜索功能相对较弱，

- 如果关键词太行业垂直，采集基本没什么数据，影响整体数据采集的健康度半段
- 如果关键词太多，重复请求响应网站，会大大加大不必要的爬虫时间，占用各自服务器的资源，消耗代理ip等

充分解耦，先入数据，再可以结合各个业务，做数据分析、挖掘，对关键信息的提取； 对一些需求字段，可能还有nlp自然语言处理，实体识别的工作。

## 难点

- 反爬虫
- 结合公司业务和需求，既有的技术组件支持，预留需求变更余地，设计进行数据分析与挖掘
- nlp实体识别

## 具体架构：

- 1、爬虫系统
    - step1：demo阶段：主要根据数据量需求，定好技术方案；解决反反爬，获取到数据
    - step2：配合业务的具体需求
        - 技术架构：多组件配合实现需求，分布式，高并发，易部署等
        - 输入、输出：需求不同
    - step3：监控，维护
        - 天眼数据监控、告警

- 2、数据分析系统
    - 关键词文本匹配

- 3、订阅推送
    - 邮件推送

## 网站列表

|  区域   | 招标网站 | 文件名称  | 代理使用| 开发难点 | 解决方案 |监控任务标识|备注|
|  ----  | ----    | ----    | ----    | ----      |  ----  |----      |---- |
| 全国  | [工信部招投标信息管理平台](https://txzbgl.miit.gov.cn/#/gateway/list)|bidding_miit_gov.py|隧道代理|无显著反爬虫|/|bfd393d796baae440f988cd158e998518b|/|
| 第三方| [中招国际招标有限公司](http://www.cntcitc.com.cn/more.html?chanType=3&chanId=12)|bidding_cntcitc.py|无代理|无显著反爬虫|/|bf0e20dee955664416844b4269eb9ad563|/|
| 全国| [中国政府采购网](http://search.ccgp.gov.cn/bxsearch?searchtype=1&page_index=1&bidSort=0&pinMu=0&bidType=0&dbselect=bidx&timeType=5)|bidding_ccgp_gov.py|隧道代理|无显著反爬虫|/|/|/|
| 全国| [全国公共资源交易平台](http://deal.ggzy.gov.cn/ds/deal/dealList_find.jsp)|bidding_ggzy_gov.py|没加代理|无显著反爬虫|/|/|/|

## 功能更新日志

- 2021-3-1
    - 表结构DDL
    - 2个招标网站，其中包含符合需求的特殊数据
    - 数据分析：关键词文本匹配

## 说明

### 数据相关

1、回测：抓取历史所有招标数据，第一次根据关键词，分析数据，推送符合要求的数据

2、日常：只分析最近30天的招标数据

### 商机延迟 T+1

1、每天会在晚上6点，差不多招标单位下班的时候，抓发布的招标，包含各行各业的招标源数据，保留历史，方便以后其他数据分析的关键词需求

2、凌晨12点，根据关键词，分析这些数据

## TODO

- 请求去重：布隆过滤器，减少重复请求，提高爬取速度
- 数据分析：
    - 消费kafka进行数据分析，减少MySQL压力，数据分析比如关键词文本匹配、nlp识别招标关键字段
    - 数据分析：并发计算关键词文本匹配 ProcessPoolExecutor sqlalchemy